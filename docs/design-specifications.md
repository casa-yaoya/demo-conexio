# デザイン仕様書

このドキュメントは、元の実装（naretore-design）における意図的なデザイン仕様を網羅的にまとめたものです。

## 1. 全体デザイン

### 1.1 カラーパレット（CSS変数）
```css
--primary-50: #eff6ff
--primary-100: #dbeafe
--primary-500: #0ea5e9
--primary-600: #0284c7
--gray-50: #f9fafb
--gray-100: #f3f4f6
--gray-200: #e5e7eb
--gray-300: #d1d5db
--gray-400: #9ca3af
--gray-500: #6b7280
--gray-600: #4b5563
--gray-700: #374151
--gray-800: #1f2937
```

### 1.2 フォント設定
- フォントファミリー: `-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif`
- ベースフォントサイズ: 14px
- 行の高さ: 1.5

### 1.3 ナレトレロゴ
- SVGベース
- 色: 赤(#c30d23)、白(#fff)、ダーク(#231815)
- viewBox: "0 0 92.87 96.21"

---

## 2. サマリービュー

### 2.1 トレンドチャート（重要）

**元の実装 (dashboard.js) の仕様:**

#### 2.1.1 チャートタイプ
- 複合チャート: 折れ線グラフ + 棒グラフ
- プレイ回数: 折れ線グラフ (青: #3b82f6)
- クリア回数: 折れ線グラフ (緑: #10b981)
- 平均スコア: 棒グラフ (オレンジ: rgba(251, 146, 60, 0.6))

#### 2.1.2 折れ線グラフの設定（重要）
```javascript
tension: 0,         // 直線で点を結ぶ（曲線にしない）
pointRadius: 4,     // 点のサイズ
pointHoverRadius: 6,
spanGaps: false     // データがない点は線でつながない
```

#### 2.1.3 データがない月の表示
- 折れ線グラフ: `null`を使用（0ではない）
- `spanGaps: false`により、欠損データの点は表示されず、線も引かれない
- 棒グラフ: 0を使用

#### 2.1.4 最小表示月数
- 最低6ヶ月分を表示
- データが6ヶ月未満の場合、データの前の月を追加して6ヶ月表示

#### 2.1.5 Y軸設定
- 左軸 (y): 回数（プレイ回数、クリア回数）
- 右軸 (y1): スコア（0-100固定）
- 右軸のグリッド線は非表示 (`drawOnChartArea: false`)

#### 2.1.6 月ラベルフォーマット
- "2024-11" → "11月" の形式で表示

### 2.2 サマリーテーブル

#### 2.2.1 表示単位
- レッスン / レベル / カテゴリー で切り替え可能

#### 2.2.2 列構成
- カテゴリー列（rowspan=3）
- レベル列（rowspan=3）
- レッスン列（rowspan=3）
- 項目列（プレイ回数/クリア回数/平均スコア）
- 合計列
- 月別列

#### 2.2.3 ソート機能
- 列ヘッダークリックでポップアップ表示
- ソート基準: プレイ回数 / クリア回数 / 平均スコア
- 昇順/降順の切り替え

---

## 3. 個人記録ビュー（プレイヤーリスト）

### 3.1 一覧テーブル
- 列: プレイヤー / 組織 / 総プレイ数 / 平均スコア / 総プレイ時間
- プレイヤー名クリックで詳細表示
- ソート可能（列ヘッダークリック）

### 3.2 詳細表示
- ← 一覧に戻るボタン
- 基本情報カード（6グリッド）
- 月別推移グラフ
- カテゴリー別統計テーブル
- レッスン別統計テーブル
- 直近のセッション（最新10件）

### 3.3 時間フォーマット
- 秒数を「◯時間◯分◯秒」形式で表示
- 例: 3661秒 → "1時間1分1秒"

---

## 4. ランキングビュー

### 4.1 テーブル構成
- 列: 順位 / プレイヤー / 所属 / 総スコア / 平均スコア / 総プレイ数

### 4.2 順位表示
- 1位: rank-1 クラス（金色背景）
- 2位: rank-2 クラス（銀色背景）
- 3位: rank-3 クラス（銅色背景）
- 表示形式: "1位", "2位", "3位"...

### 4.3 カテゴリー/レベル別列
- 動的に生成
- 各カテゴリー/レベルの組み合わせでクリア数を表示

---

## 5. ログビュー

### 5.1 テーブル構成
- 列: 日付 / プレイヤー / レッスン / スコア / 発話時間 / プレイ時間

### 5.2 ページネーション
- 前へ / 次へ ボタン
- 「ページ X / Y」表示

### 5.3 日付フォーマット
- 日本標準時（JST）で表示
- "YYYY/MM/DD HH:mm" 形式

---

## 6. データ読込ビュー

### 6.1 統計表示
- 総レコード数
- プレイヤー数
- レッスン数
- 期間

### 6.2 アップロード機能
- CSVファイル選択ボタン
- デモデータ読み込みボタン
- ステータス表示（読込中/成功/エラー）

### 6.3 プレビューテーブル
- 最新10件を表示
- 列: 日付 / 組織 / プレイヤー / レッスン / スコア

---

## 7. ロープレ構築ビュー

### 7.1 グリッドレイアウト
```css
display: grid;
grid-template-columns: 420px minmax(0, 1fr);
grid-template-rows: calc(50vh - 65px) minmax(0, 1fr);
gap: 16px;
```

### 7.2 操作コンポーネント（左列）
- 2行分のスパン
- sticky position
- ドラッグ&ドロップ対応

#### 7.2.1 ドラッグオーバーレイ
- 背景: rgba(14, 165, 233, 0.95)
- アイコンのバウンスアニメーション

### 7.3 チャットメッセージ

#### 7.3.1 メッセージバブル
- AI: 白背景、グレー境界線、左寄せ
- ユーザー: プライマリ色背景、白テキスト、右寄せ
- フェードインアニメーション

#### 7.3.2 アバター
- AIアバター: ナレトレロゴ（36x36px）
- ユーザーアバター: グレー背景に👤

### 7.4 モード選択
- 4つのモード: 台本モード / お手本モード / 確認モード / 実戦モード
- アクティブ時: プライマリ色背景

### 7.5 ビデオウィンドウ
- グラデーション背景: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
- キャラクターのフロートアニメーション

### 7.6 コントロールボタン

#### 7.6.1 スタートボタン
- 幅: 120px、高さ: 42px
- 通常: 緑(#10b981)
- アクティブ（停止）: 赤(#ef4444)

#### 7.6.2 マイクボタン
- 幅: 120px、高さ: 42px
- 通常: グレー(#9ca3af)
- 録音中: 緑(#10b981) + パルスアニメーション

### 7.7 設計コンポーネント

#### 7.7.1 展開/折りたたみ
- テストエリアの開閉
- スライドアニメーション（1秒、cubic-bezier(0.4, 0.0, 0.2, 1)）

#### 7.7.2 タブ
- ロープレ設計 / フロー / プロンプト設定
- アクティブ時: プライマリ色の下線(3px)

---

## 8. コンポーネント共通

### 8.1 カード
```css
background: white;
border-radius: 12px;
border: 1px solid var(--gray-200);
padding: 20px;
box-shadow: 0 1px 3px rgba(0,0,0,0.1);
```

### 8.2 ボタン

#### 8.2.1 プライマリボタン
```css
background: var(--primary-600);
color: white;
padding: 10px 16px;
border-radius: 6px;
font-weight: 600;
```

#### 8.2.2 セカンダリボタン
```css
background: var(--gray-100);
color: var(--gray-700);
border: 1px solid var(--gray-300);
```

### 8.3 入力フィールド
```css
padding: 10px 14px;
border: 1px solid var(--gray-300);
border-radius: 6px;
font-size: 14px;
```

### 8.4 テーブル
```css
width: 100%;
border-collapse: collapse;
```
- ヘッダー: グレー背景(var(--gray-50))
- 行ホバー: 薄い青背景(var(--primary-50))
- 境界線: var(--gray-200)

---

## 9. アニメーション

### 9.1 フェードイン
```css
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
```

### 9.2 フロート（キャラクター）
```css
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
}
```

### 9.3 パルス（マイク録音中）
```css
@keyframes pulse-mic {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}
```

### 9.4 スピナー
```css
@keyframes spin {
    to { transform: rotate(360deg); }
}
```

---

## 10. レスポンシブ対応

### 10.1 サイドバー
- モバイル: オーバーレイ表示
- デスクトップ: 固定表示

### 10.2 コンテンツ作成ビュー
- グリッドレイアウトの調整
- 最小幅の設定

---

## 差分リスト（Nuxt版の実装状況）

### 高優先度 - ✅ 全て実装済み

1. ✅ **チャート: tension: 0** - TrendChart.vueで実装済み（直線で点を結ぶ）
2. ✅ **チャート: spanGaps: false** - TrendChart.vueで実装済み（欠損データの点を結ばない）
3. ✅ **チャート: 複合チャート** - TrendChart.vueで棒グラフ+折れ線の複合チャート実装済み
4. ✅ **チャート: 最小6ヶ月表示** - TrendChart.vueとuseDemoData.tsで実装済み
5. ✅ **チャート: nullデータ処理** - useDemoData.tsで欠損月のデータをnullで処理
6. ✅ **チャート: 二軸設定** - TrendChart.vueで左軸（回数）と右軸（スコア0-100）を実装

### 中優先度 - ✅ 全て実装済み

7. ✅ **ランキングの順位スタイル** - main.cssで1-3位の特別表示（金/銀/銅）を実装
8. ✅ **ログビューのページネーション** - index.vueで「前へ/次へ」と「ページ X / Y」表示を実装
9. ✅ **時間表示フォーマット** - formatTime関数で「◯時間◯分◯秒」形式を実装
10. ✅ **日付フォーマット** - formatDateTime関数で「YYYY/MM/DD HH:mm」形式を実装

### 低優先度 - 実装状況

11. ✅ **ドラッグオーバーレイのアニメーション** - main.cssで dragBounce アニメーション実装済み
12. ✅ **チャット入力のオートリサイズ** - adjustTextareaHeight関数で実装済み（最大高さ150px）
13. ⏳ **設計コンポーネントの展開アニメーション** - ロープレ構築機能の一部として今後実装予定
